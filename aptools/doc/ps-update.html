<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Analysis Power Tools: MANUAL: ps-update (2.12.0)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
             <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
             <li><a href="CHANGE.html"><span>Change&nbsp;Log</span></a></li>
             <li><a href="VIGNETTE.html"><span>Vignettes</span></a></li>
             <li><a href="FAQ.html"><span>FAQs</span></a></li>
             <li><a href="FILE-FORMATS.html"><span>File Formats</span></a></li>
             <li><a href="PLATFORMS.html"><span>Platforms</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><h1>MANUAL: ps-update (2.12.0) </h1></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Contents </h2>
<ul>
<li><a href="#intro">Introduction</a></li>
<li><a href="#quickstart">Quick Start</a></li>
<li><a href="#options">Options</a></li>
</ul>
<p><a class="anchor" id="intro"></a> </p>
<h2>Introduction </h2>
<p><b>ps-update</b> program merges genotype results from two genotyping analyses. The supplemental analysis results are merged into the main analysis results. The supplemental results must have the same samples and sample order as the main results, and must have a subset of the probesets found in the main results. A file in the main results folder is only updated if the same file type exists in the supplemental results folder.</p>
<p>The following files can be updated by ps-update:
<li>AxiomGT1.calls.txt or .a5</li>
<li>AxiomGT1.report.txt</li>
<li>AxiomGT1.summary.txt or .a5</li>
<li>AxiomGT1.confidences.txt or .a5</li>
<li>AxiomGT1.probabilities.txt</li>
<li>AxiomGT1.snp-posteriors.txt</li>
<li>AxiomGT1.snp-posteriors.multi.txt</li>
<li>AxiomGT1.rare_het_maj_hom.report.txt</li>
<li>AxiomGT1.rare_het.report.txt</li>
<li>AxiomAnalysisSuiteData/All_genotypes_by_snps.CHP.bin</li>
<li>AxiomAnalysisSuiteData/All_genotypes_by_snps.CHP.index.txt</li>
<li>SNPolisher/metrics.txt</li>
<li>SNPolisher/multi-metrics.txt</li>
</p>
<p>If <b>ps-update</b> updates the file created by ps-metrics, it is important to rerun <b>ps-classification</b> afterwards on the updated metrics to finish the SNP QC steps. This is because <b>ps-update</b> does not update the Ps.performance.txt file.</P>
<p><a class="anchor" id="quickstart"></a> </p>
<h2>Quick Start </h2>
<p>Example 1: Merge genotype results from supplemental folder into main folder whose files use the same analysis name prefix (AxiomGT1). Merge only specified supplemental folder probeset results into the main results. When the destination folder is not set, the destination is the main folder, and <b>ps-update</b> will back up the original results when updating the main results files. Since <code>--full-backup false</code>, small backup files are made when possible, containing the original results for only the probesets that are updated. The special SNPs file is used to recalculate sample call rates in the updated AxiomGT1.report.txt. </p>
<pre class="fragment">
ps-update \
--special-snps $AXIOM_LIB_PATH/Axiom_PMDA.r7.specialSNPs \
--main-gt-dir ./main_genotypes \
--supplemental-gt-dir ./supplemental_genotypes \
--probeset-ids probesets_to_update.ps \
--full-backup false \
--log-file ps-update.log
</pre>
<p>Example 2: Same as Example 1, but instead save the updated results to a new folder, leaving the main results unchanged. Because <code>out-gt-dir</code> is different than <code>main-gt-dir</code>, backup files are not created. </p>
<pre class="fragment">
ps-update \
--special-snps $AXIOM_LIB_PATH/Axiom_PMDA.r7.specialSNPs \
--main-gt-dir ./main_genotypes \
--supplemental-gt-dir ./supplemental_genotypes \
--probeset-ids probesets_to_update.ps \
--out-gt-dir ./merged_genotypes \
--log-file ps-update.log
</pre>
<p>Example 3: Merge genotyping and ps-metric’s metrics.txt results from supplemental folders into main folders. In this example, the genotyping folders use a different analysis name prefix (PlateNorm.calls.txt versus AxiomGT1.calls.txt). Merge only the probesets listed in supplemental folder’s Recommended.ps file into the main results. </p>
<pre class="fragment">
ps-update \
--special-snps $AXIOM_LIB_PATH/Axiom_PMDA.r7.specialSNPs \
--main-gt-dir ./main_genotypes \
--main-analysis-name AxiomGT1 \
--main-metrics-file ./main_SNPolisher/metrics.txt \
--supplemental-gt-dir ./supplemental_genotypes \
--supplemental-analysis-name PlateNorm \
--supplemental-metrics-file ./supplemental_SNPolisher/metrics.txt \
--probeset-ids ./supplemental_SNPolisher/Recommended.ps \
--full-backup false \
--log-file $OUTDIR/ps-update.log
</pre>
<p>In these examples, the AxiomAnalysisSuiteData folder is only updated if it exists inside <code>main-gt-dir</code> and <code>supplemental-gt-dir</code>. Backups are not made of AxiomAnalysisSuiteData folder’s files when they are updated. </p>
<p>For more details on the use of <b>ps-update</b> with Axiom&trade; arrays see the vignette on <a href="vignette-Axiom-PMDA.html">Axiom&trade; Precision Medicine Diversity Array (PMDA)</a>.</p>

<p><a class="anchor" id="options"></a></p>
<h2>Options </h2>
<pre class="fragment">
   'ps-update.exe'
   v2.12.0-rc1 https://github.com/thermofisher/ma-alg-apt2-ps-update b8bbdd6(f4bc44b) 2023-11-15

USER HELP ----------

  --version (flag) = Display the version info for this program.

  --user-help (flag) = Display help intended for end-users.
    Aliases: --help, -h

  --log-file (string8) = The name of the log file.  Defaults to 'PROGRAMNAME-NUMBER.log'.
    default value: 'D:\ps-update.2_11_8RC2.dev_help.log'
    Aliases: --lf

  --console-add-select (string8) = Add selectors for console messages.
    e.g. to include all debug messages: --console-add-select debug
         to include all messages of level 3 or higher: --console-add-select '*:3'


  --console-add-neg-select (string8) = Add selectors to be excluded from console messages.
    e.g. to exclude all warning messages and errors summary: --console-add-neg-select WARNING,summary


  --arg-file (filename) = Read arguments from this file.
    File should be a valid XML file, and should contain elements of the form
    &lt;Parameter name="PARAMETER-NAME" analysis="NODE-NAME" currentValue="VALUE" /&gt;.

  --check-param (flag) = Stop the program after the command parameters have been checked.

  --max-threads (int32) = Maximum thread count (0 = unlimited threads); Default = number of CPUs detected
    default value: '0'
    Aliases: --mt, --max_threads

  --main-gt-dir (dirname) = Full path of main genotyping batch directory to update. Required if supplemental-gt-dir is supplied or main-metrics-file is not supplied.
    Aliases: --main-batch-folder

  --main-analysis-name (string8) = Genotype filename prefix in main-gt-dir.
    default value: 'AxiomGT1'

  --main-batch-folder-dirname (string8) = Name of analysis data directory to update in main-gt-dir.
    default value: 'AxiomAnalysisSuiteData'

  --main-metrics-file (filename) = Full path of the main ps-metrics biallelic metrics file to update. Required if supplemental-metrics-file is supplied.

  --main-multi-metrics-file (filename) = Full path of the main ps-metrics multiallelic metrics file to update. Required if supplemental-multi-metrics-file is supplied.

  --supplemental-gt-dir (dirname) = Full path of supplemental genotyping directory to merge into main-gt-dir. Required if main-gt-dir is supplied.
    Aliases: --supplemental-batch-folder

  --special-snps-file (filename) = Full path of file specifying non-autosomal chromosome information. Required if main-gt-dir is supplied.
    Aliases: --special-snps

  --supplemental-analysis-name (string8) = Genotype filename prefix in supplemental-gt-dir.
    default value: 'AxiomGT1'

  --supplemental-batch-folder-dirname (string8) = Name of analysis data directory in supplemental-gt-dir to merge into main-batch-folder-dirname.
    default value: 'AxiomAnalysisSuiteData'

  --supplemental-metrics-file (filename) = Full path of the supplemental ps-metrics biallelic metrics file to merge into main-metrics-file. Required if main-metrics-file is supplied.

  --supplemental-multi-metrics-file (filename) = Full path of the supplemental ps-metrics multiallelic metrics file to merge into main-multi-metrics-file. Required if main-multi-metrics-file is supplied.

  --probeset-ids (filename) = Tab delimited file with column 'probeset_id' specifying probesets from supplemental files to merge into main files. If probeset-ids not supplied, all supplemental file probesets matched to main file probesets are merged into main files.

  --out-gt-dir (dirname) = Full path for saving updated genotype files. If not provided or same as main-gt-dir, then existing files in main-gt-dir are overwritten and backup files are added to same directory.
    default value: 'PlateNorm'

  --out-ps-metrics-dir (dirname) = Full path for saving updated PSMetrics Results files. If not provided or same directory where main-metrics-file or main-multi-metrics-file are located, then existing files are overwritten and backup files are added to same directory.

  --full-backup (bool) = If save directory is same as any main file directory, back up original version of updated .txt and .a5 files. If set to False, make small backups containing the original values only for updated probesets. Full or small backups add .bak or .bak_small file extensions.
    default value: 'True'

  --@help       = print developer help
</pre>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Monday March 11 2024 12:27:00 for Analysis Power Tools by&nbsp;
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
